{% extends '_base.html' %} {% block content %}

<div class="app-body">
	<!--TODO SIGN IN/OUT... Login Name replaces "Hi First Last"-->
	<h1 class="current-date">
		Hi, <span class="welcome-name">First Last</span>! -- Today is {{today}}
		<em>- WORK IN PROGRESS -</em>
	</h1>
	<div class="birthday-form">
		<form method="post" action="/push">
			<table>
				<th colspan="4" class="birthday-title">Upcoming Birthdays!</th>
                {% for birthday in birthdays %}
                    <tr>
                        <td class="birthday-name">{{ birthday.name }}</td>
                        <td class="birthday-date">{{ birthday.get_formatted_date() }}</td>
                        {% set countdown = birthday.get_countdown() %}
                        {% if countdown is equalto 0 %}
                            <td class="birthday-countdown">Today!</td>
                        {% else %}
                            <td class="birthday-countdown"> in {{countdown}} days!</td>
                        {% endif %}
                        <td>
                            <a id="delete-bd" onclick="show_image('https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.dictionary.com%2Fe%2Femoji%2Fslightly-frowning-face%2F&psig=AOvVaw2JXcxUfhw1BgUdTnRa-lf2&ust=1667933506770000&source=images&cd=vfe&ved=0CA8QjRxqFwoTCJCk2dPenPsCFQAAAAAdAAAAABAE', 276, 110, 'Frowny Face');" href="/delete-birthday?id={{ birthday.entity_id }}">delete</a>
                        </td>
                    </tr>
                {% else %}
                <tr><td colspan="4">No birthdays to list.</td></tr>
                {% endfor %}
				<tr>
					<td><input type="text" name="name" value="{{name}}" /></td>
					<td><input type="date" name="date" value="{{date}}" /></td>
					<td><input id="submit-bd" type="submit" /></td>
				</tr>
			</table>
		</form>
	</div>
	<!-- JS-CONFETTI -->
	<script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
	<script>
		const jsConfetti = new JSConfetti();
		function confetti() {
			jsConfetti.addConfetti();
			console.log("Confetti loaded");
		}
		document
			.getElementById("submit-bd")
			.addEventListener("mouseover", confetti);
	</script>
	<!--Javascript2-->
	<script src="javascript2.js"></script>
	<script>
		function show_image(src, width, height, alt) {
			var img = document.createElement("img");
			img.src = src;
			img.width = width;
			img.height = height;
			img.alt = alt;

			// This next line will just add it to the <body> tag
			document.body.appendChild(img);
		}
		document
			.getElementById("delete-bd")
			.addEventListener("mouseover", show_image);
	</script>
</div>

{% endblock %}
